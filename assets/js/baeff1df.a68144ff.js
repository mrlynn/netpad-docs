"use strict";(self.webpackChunkdocs_netpad_io=self.webpackChunkdocs_netpad_io||[]).push([[864],{7560:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"api/authentication","title":"Authentication API","description":"API endpoints for authentication and session management.","source":"@site/docs/api/authentication.md","sourceDirName":"api","slug":"/api/authentication","permalink":"/docs/api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/mrlynn/netpad-v3/tree/main/docs/docs/api/authentication.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"API Overview","permalink":"/docs/api/overview"},"next":{"title":"Forms API","permalink":"/docs/api/forms"}}');var s=i(4848),a=i(8453);const r={},l="Authentication API",o={},c=[{value:"Get Session",id:"get-session",level:2},{value:"Magic Link Authentication",id:"magic-link-authentication",level:2},{value:"Send Magic Link",id:"send-magic-link",level:3},{value:"Verify Magic Link",id:"verify-magic-link",level:3},{value:"OAuth Authentication",id:"oauth-authentication",level:2},{value:"Initiate OAuth Flow",id:"initiate-oauth-flow",level:3},{value:"OAuth Callback",id:"oauth-callback",level:3},{value:"Passkey Authentication",id:"passkey-authentication",level:2},{value:"Get Registration Options",id:"get-registration-options",level:3},{value:"Complete Registration",id:"complete-registration",level:3},{value:"Get Login Options",id:"get-login-options",level:3},{value:"Complete Login",id:"complete-login",level:3},{value:"API Keys (Future Feature)",id:"api-keys-future-feature",level:2},{value:"Authentication Methods",id:"authentication-methods",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Related",id:"related",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authentication-api",children:"Authentication API"})}),"\n",(0,s.jsx)(n.p,{children:"API endpoints for authentication and session management."}),"\n",(0,s.jsx)(n.h2,{id:"get-session",children:"Get Session"}),"\n",(0,s.jsx)(n.p,{children:"Get current session information."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/auth/session\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "user": {\n    "userId": "user_123",\n    "email": "user@example.com",\n    "organizations": [...]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"magic-link-authentication",children:"Magic Link Authentication"}),"\n",(0,s.jsx)(n.h3,{id:"send-magic-link",children:"Send Magic Link"}),"\n",(0,s.jsx)(n.p,{children:"Send a passwordless magic link email."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/magic-link/send\nContent-Type: application/json\n\n{\n  "email": "user@example.com"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Magic link sent to email"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"verify-magic-link",children:"Verify Magic Link"}),"\n",(0,s.jsx)(n.p,{children:"Verify magic link token and establish session."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/magic-link/verify\nContent-Type: application/json\n\n{\n  "token": "magic_link_token"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "user": {\n    "userId": "user_123",\n    "email": "user@example.com"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"oauth-authentication",children:"OAuth Authentication"}),"\n",(0,s.jsx)(n.h3,{id:"initiate-oauth-flow",children:"Initiate OAuth Flow"}),"\n",(0,s.jsx)(n.p,{children:"Start OAuth authentication with a provider (Google, GitHub)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/auth/oauth/[provider]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Supported Providers"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"google"})," - Google OAuth"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"github"})," - GitHub OAuth"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),": Redirects to provider's authorization page"]}),"\n",(0,s.jsx)(n.h3,{id:"oauth-callback",children:"OAuth Callback"}),"\n",(0,s.jsx)(n.p,{children:"OAuth callback handler (called by provider)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/auth/oauth/callback/[provider]?code=...&state=...\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),": Redirects to application with session established"]}),"\n",(0,s.jsx)(n.h2,{id:"passkey-authentication",children:"Passkey Authentication"}),"\n",(0,s.jsx)(n.h3,{id:"get-registration-options",children:"Get Registration Options"}),"\n",(0,s.jsx)(n.p,{children:"Get passkey registration options for the user."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/passkey/register-options\nContent-Type: application/json\n\n{\n  "userId": "user_123"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "challenge": "...",\n  "rp": {\n    "name": "NetPad",\n    "id": "netpad.io"\n  },\n  "user": {\n    "id": "...",\n    "name": "user@example.com",\n    "displayName": "User Name"\n  },\n  "pubKeyCredParams": [...]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"complete-registration",children:"Complete Registration"}),"\n",(0,s.jsx)(n.p,{children:"Complete passkey registration."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/passkey/register\nContent-Type: application/json\n\n{\n  "credential": {...}\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-login-options",children:"Get Login Options"}),"\n",(0,s.jsx)(n.p,{children:"Get passkey login options."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/passkey/login-options\nContent-Type: application/json\n\n{\n  "email": "user@example.com"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"complete-login",children:"Complete Login"}),"\n",(0,s.jsx)(n.p,{children:"Complete passkey login."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/auth/passkey/login\nContent-Type: application/json\n\n{\n  "credential": {...}\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"api-keys-future-feature",children:"API Keys (Future Feature)"}),"\n",(0,s.jsx)(n.p,{children:"API key authentication for server-to-server integrations is planned for a future release."}),"\n",(0,s.jsx)(n.h2,{id:"authentication-methods",children:"Authentication Methods"}),"\n",(0,s.jsx)(n.p,{children:"NetPad supports multiple authentication methods:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Magic Links"}),": Passwordless email authentication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Passkeys"}),": WebAuthn/FIDO2 biometric authentication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OAuth"}),": Google, GitHub, and other providers"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/platform/authentication",children:"Platform Authentication"})," for user-facing authentication documentation."]}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use HTTPS"}),": Always use secure connections"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Secure Cookies"}),": Sessions use HTTP-only, secure cookies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token Expiration"}),": Magic link tokens expire after use"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CSRF Protection"}),": OAuth flows include state validation"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:"Authentication endpoints have specific rate limits:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Endpoint"}),(0,s.jsx)(n.th,{children:"Limit"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/auth/magic-link/send"})}),(0,s.jsx)(n.td,{children:"5 requests/hour per email"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/auth/magic-link/verify"})}),(0,s.jsx)(n.td,{children:"10 requests/hour per IP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/api/auth/passkey/login-options"})}),(0,s.jsx)(n.td,{children:"20 requests/hour per IP"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Rate limit information is included in response headers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"X-RateLimit-Limit: 5\nX-RateLimit-Remaining: 3\nX-RateLimit-Reset: 1640995200\n"})}),"\n",(0,s.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/api/overview",children:"API Overview"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/platform/authentication",children:"Platform Authentication"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);