"use strict";(self.webpackChunkdocs_netpad_io=self.webpackChunkdocs_netpad_io||[]).push([[5175],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},83819:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"forms/reactions","title":"Form Reactions","description":"Form Reactions enable real-time field updates by connecting form field events to workflows. When a user interacts with a field (blur, change, focus), a reaction can execute a workflow and automatically update other form fields with the results.","source":"@site/docs/forms/reactions.md","sourceDirName":"forms","slug":"/forms/reactions","permalink":"/docs/forms/reactions","draft":false,"unlisted":false,"editUrl":"https://github.com/mrlynn/netpad-v3/tree/main/docs/docs/forms/reactions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\ud83d\ude80 Publishing","permalink":"/docs/forms/publishing"},"next":{"title":"\ud83d\udcbb Code Generation","permalink":"/docs/forms/code-generation"}}');var s=i(74848),t=i(28453);const l={},o="Form Reactions",d={},c=[{value:"What Are Form Reactions?",id:"what-are-form-reactions",level:2},{value:"How Reactions Work",id:"how-reactions-work",level:2},{value:"Creating a Form Reaction",id:"creating-a-form-reaction",level:2},{value:"Step 1: Build the Reaction Workflow",id:"step-1-build-the-reaction-workflow",level:3},{value:"Step 2: Configure the Reaction on Your Form",id:"step-2-configure-the-reaction-on-your-form",level:3},{value:"Workflow Nodes for Reactions",id:"workflow-nodes-for-reactions",level:2},{value:"Field Event Trigger",id:"field-event-trigger",level:3},{value:"Form Field Update",id:"form-field-update",level:3},{value:"Reaction Configuration",id:"reaction-configuration",level:2},{value:"Reaction Object Structure",id:"reaction-object-structure",level:3},{value:"Trigger Events",id:"trigger-events",level:3},{value:"Debounce Settings",id:"debounce-settings",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"List Reactions",id:"list-reactions",level:3},{value:"Create Reaction",id:"create-reaction",level:3},{value:"Get Reaction",id:"get-reaction",level:3},{value:"Update Reaction",id:"update-reaction",level:3},{value:"Delete Reaction",id:"delete-reaction",level:3},{value:"Execute Reaction",id:"execute-reaction",level:3},{value:"React Integration",id:"react-integration",level:2},{value:"useFormReactions Hook",id:"useformreactions-hook",level:3},{value:"Hook Return Values",id:"hook-return-values",level:3},{value:"Reaction States",id:"reaction-states",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Appropriate Debounce",id:"1-use-appropriate-debounce",level:3},{value:"2. Handle Errors Gracefully",id:"2-handle-errors-gracefully",level:3},{value:"3. Set Reasonable Timeouts",id:"3-set-reasonable-timeouts",level:3},{value:"4. Use Null Behavior Wisely",id:"4-use-null-behavior-wisely",level:3},{value:"5. Keep Workflows Simple",id:"5-keep-workflows-simple",level:3},{value:"Limitations",id:"limitations",level:2},{value:"Current Phase (v1)",id:"current-phase-v1",level:3},{value:"Planned Features",id:"planned-features",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Reaction Not Firing",id:"reaction-not-firing",level:3},{value:"Field Updates Not Appearing",id:"field-updates-not-appearing",level:3},{value:"Timeout Errors",id:"timeout-errors",level:3},{value:"Cascade Loop Detected",id:"cascade-loop-detected",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"form-reactions",children:"Form Reactions"})}),"\n",(0,s.jsx)(n.p,{children:"Form Reactions enable real-time field updates by connecting form field events to workflows. When a user interacts with a field (blur, change, focus), a reaction can execute a workflow and automatically update other form fields with the results."}),"\n",(0,s.jsx)(n.h2,{id:"what-are-form-reactions",children:"What Are Form Reactions?"}),"\n",(0,s.jsx)(n.p,{children:"Form Reactions are a powerful feature that bridges forms and workflows, enabling dynamic, intelligent forms that respond to user input in real-time."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Use Cases:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Company Lookup"}),": User enters a company domain \u2192 workflow fetches company data from an API \u2192 auto-fills company name, industry, and size fields"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Address Validation"}),": User enters a postal code \u2192 workflow validates and looks up location \u2192 auto-fills city and state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Price Calculation"}),": User selects products \u2192 workflow calculates pricing \u2192 updates total price field"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"AI Categorization"}),": User enters a description \u2192 AI classifies the content \u2192 suggests category and tags"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time Validation"}),": User enters an email \u2192 workflow checks database \u2192 shows availability status"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-reactions-work",children:"How Reactions Work"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Form Field    \u2502         \u2502    Workflow     \u2502         \u2502  Form Fields    \u2502\n\u2502     Event       \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u25ba \u2502   Execution     \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u25ba \u2502    Updated      \u2502\n\u2502  (blur/change)  \u2502         \u2502                 \u2502         \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1. User interacts with a form field (e.g., leaves domain field)\n2. Reaction detects the configured event (blur)\n3. Workflow executes with form data as context\n4. Workflow processes data (API calls, transforms, AI, etc.)\n5. Form Field Update node returns field mappings\n6. Form fields are automatically updated with new values\n"})}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-form-reaction",children:"Creating a Form Reaction"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-build-the-reaction-workflow",children:"Step 1: Build the Reaction Workflow"}),"\n",(0,s.jsx)(n.p,{children:"First, create a workflow with these key nodes:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Field Event Trigger"})," (entry point)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Receives the triggering field data and full form context"}),"\n",(0,s.jsx)(n.li,{children:"Configure trigger mode (any/all) and debounce"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Processing Nodes"})," (your business logic)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"HTTP Request to fetch external data"}),"\n",(0,s.jsx)(n.li,{children:"Transform to modify data structure"}),"\n",(0,s.jsx)(n.li,{children:"AI nodes for classification or extraction"}),"\n",(0,s.jsx)(n.li,{children:"MongoDB queries for database lookups"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Form Field Update"})," (output)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Maps workflow data to form fields"}),"\n",(0,s.jsx)(n.li,{children:"Configures null value handling"}),"\n",(0,s.jsx)(n.li,{children:"Sets feedback mode (silent, subtle, toast)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-configure-the-reaction-on-your-form",children:"Step 2: Configure the Reaction on Your Form"}),"\n",(0,s.jsx)(n.p,{children:"Once your workflow is ready:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Open your form in the Form Builder"}),"\n",(0,s.jsx)(n.li,{children:"Navigate to the Reactions section"}),"\n",(0,s.jsx)(n.li,{children:'Click "Add Reaction"'}),"\n",(0,s.jsxs)(n.li,{children:["Configure:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),': Descriptive name (e.g., "Company Domain Lookup")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Workflow"}),": Select your reaction workflow"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trigger Fields"}),": Which fields trigger this reaction"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trigger Event"}),": When to fire (blur, change, focus)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Debounce"}),": Delay to prevent rapid firing (recommended: 500ms for text)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"workflow-nodes-for-reactions",children:"Workflow Nodes for Reactions"}),"\n",(0,s.jsx)(n.h3,{id:"field-event-trigger",children:"Field Event Trigger"}),"\n",(0,s.jsx)(n.p,{children:"The entry point for all reaction workflows."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Form ID"}),(0,s.jsx)(n.td,{children:"Usually set automatically by the reaction system"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trigger Mode"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"any"})," fires on any field, ",(0,s.jsx)(n.code,{children:"all"})," requires all fields to have values"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Debounce (ms)"}),(0,s.jsx)(n.td,{children:"Delay before executing (0-30000ms)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output Data:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  triggerField: "companyDomain",       // Field that triggered\n  triggerEvent: "blur",                // Event type\n  fieldValue: "mongodb.com",           // Value of triggering field\n  formData: {                          // Complete form data\n    companyDomain: "mongodb.com",\n    companyName: "",\n    industry: ""\n  },\n  formId: "form_abc123",\n  reactionId: "reaction_xyz789"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Accessing Data in Downstream Nodes:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"// Access the triggering field value\n{{nodes.fieldEventTrigger.fieldValue}}\n\n// Access a specific form field\n{{nodes.fieldEventTrigger.formData.companyDomain}}\n\n// Access the event type\n{{nodes.fieldEventTrigger.triggerEvent}}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"form-field-update",children:"Form Field Update"}),"\n",(0,s.jsx)(n.p,{children:"Maps workflow outputs to form fields."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Feedback Mode"}),(0,s.jsxs)(n.td,{children:["How to notify users: ",(0,s.jsx)(n.code,{children:"silent"}),", ",(0,s.jsx)(n.code,{children:"subtle"}),", or ",(0,s.jsx)(n.code,{children:"toast"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Validate After Update"}),(0,s.jsx)(n.td,{children:"Run form validation after applying updates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Field Mappings"}),(0,s.jsx)(n.td,{children:"Array of source \u2192 field mappings"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Field Mapping Options:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Form Field Path"}),(0,s.jsxs)(n.td,{children:["Target field (e.g., ",(0,s.jsx)(n.code,{children:"companyName"}),", ",(0,s.jsx)(n.code,{children:"address.city"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Source Data Path"}),(0,s.jsxs)(n.td,{children:["Path in workflow data (e.g., ",(0,s.jsx)(n.code,{children:"httpRequest.data.company.name"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Null Behavior"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"skip"})," (default), ",(0,s.jsx)(n.code,{children:"clear"}),", or ",(0,s.jsx)(n.code,{children:"default"})]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Mappings:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Source: httpRequest.data.company.name     \u2192 Field: companyName\nSource: httpRequest.data.company.industry \u2192 Field: industry\nSource: httpRequest.data.company.size     \u2192 Field: employeeCount\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output Data:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  success: true,\n  updates: {\n    companyName: "MongoDB, Inc.",\n    industry: "Technology",\n    employeeCount: "5000+"\n  },\n  updatedFields: ["companyName", "industry", "employeeCount"],\n  skippedFields: []\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"reaction-configuration",children:"Reaction Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"reaction-object-structure",children:"Reaction Object Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface FormReaction {\n  id: string;                    // Unique identifier\n  name: string;                  // Display name\n  description?: string;          // Optional description\n  workflowId: string;            // ID of the workflow to execute\n\n  trigger: {\n    fields?: string[];           // Fields that trigger this reaction\n    event?: 'change' | 'blur' | 'focus' | 'validate' | 'clear';\n    debounceMs?: number;         // Delay before executing (0-30000ms)\n    condition?: string;          // Optional trigger condition\n  };\n\n  execution: {\n    mode: 'sync';                // Synchronous execution (v1)\n    timeoutMs?: number;          // Max execution time (default: 10000ms)\n  };\n\n  feedback?: {\n    showLoading?: boolean;       // Show loading indicator\n    loadingText?: string;        // Custom loading message\n    showSuccess?: boolean;       // Show success feedback\n    showError?: boolean;         // Show error messages\n  };\n\n  enabled: boolean;              // Whether reaction is active\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"trigger-events",children:"Trigger Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"When It Fires"}),(0,s.jsx)(n.th,{children:"Best For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"blur"})}),(0,s.jsx)(n.td,{children:"User leaves the field"}),(0,s.jsx)(n.td,{children:"Domain lookups, validation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"change"})}),(0,s.jsx)(n.td,{children:"Value changes"}),(0,s.jsx)(n.td,{children:"Calculations, live updates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"focus"})}),(0,s.jsx)(n.td,{children:"User enters the field"}),(0,s.jsx)(n.td,{children:"Pre-loading data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"validate"})}),(0,s.jsx)(n.td,{children:"Field validation runs"}),(0,s.jsx)(n.td,{children:"Custom validation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"clear"})}),(0,s.jsx)(n.td,{children:"Field is cleared"}),(0,s.jsx)(n.td,{children:"Resetting related fields"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"debounce-settings",children:"Debounce Settings"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field Type"}),(0,s.jsx)(n.th,{children:"Recommended Debounce"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Text input"}),(0,s.jsx)(n.td,{children:"500ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Select/Dropdown"}),(0,s.jsx)(n.td,{children:"0ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Checkbox/Radio"}),(0,s.jsx)(n.td,{children:"0ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Search field"}),(0,s.jsx)(n.td,{children:"300-500ms"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.p,{children:["All endpoints require authentication and an ",(0,s.jsx)(n.code,{children:"orgId"})," query parameter."]}),"\n",(0,s.jsx)(n.h3,{id:"list-reactions",children:"List Reactions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/forms/{formId}/reactions?orgId={orgId}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "reactions": [...],\n  "total": 3\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"create-reaction",children:"Create Reaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/forms/{formId}/reactions?orgId={orgId}\nContent-Type: application/json\n\n{\n  "name": "Company Lookup",\n  "description": "Fetch company data on domain blur",\n  "workflowId": "wf_abc123",\n  "trigger": {\n    "fields": ["companyDomain"],\n    "event": "blur",\n    "debounceMs": 500\n  },\n  "execution": {\n    "mode": "sync",\n    "timeoutMs": 10000\n  },\n  "feedback": {\n    "showLoading": true,\n    "loadingText": "Looking up company..."\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-reaction",children:"Get Reaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/forms/{formId}/reactions/{reactionId}?orgId={orgId}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"update-reaction",children:"Update Reaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'PUT /api/forms/{formId}/reactions/{reactionId}?orgId={orgId}\nContent-Type: application/json\n\n{\n  "enabled": false,\n  "trigger": { "debounceMs": 1000 }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"delete-reaction",children:"Delete Reaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"DELETE /api/forms/{formId}/reactions/{reactionId}?orgId={orgId}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"execute-reaction",children:"Execute Reaction"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST /api/forms/{formId}/reactions/execute?orgId={orgId}\nContent-Type: application/json\n\n{\n  "reactionId": "reaction_abc123",\n  "triggerField": "companyDomain",\n  "triggerEvent": "blur",\n  "fieldValue": "mongodb.com",\n  "formData": {\n    "companyDomain": "mongodb.com",\n    "companyName": ""\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "status": "completed",\n  "updates": {\n    "companyName": "MongoDB, Inc.",\n    "industry": "Technology"\n  },\n  "durationMs": 850\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"react-integration",children:"React Integration"}),"\n",(0,s.jsx)(n.h3,{id:"useformreactions-hook",children:"useFormReactions Hook"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"useFormReactions"})," hook provides React integration for form reactions."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useFormReactions } from '@/hooks/useFormReactions';\n\nfunction MyForm({ formId, orgId, reactions }) {\n  const {\n    triggerReaction,\n    cancelReaction,\n    hasReaction,\n    getFieldReactions,\n    reactionStates,\n    pendingFields,\n    recentlyUpdatedFields,\n  } = useFormReactions({\n    formId,\n    orgId,\n    reactions,\n    onFieldUpdate: (fieldPath, value) => {\n      // Update your form state\n      setFormData(prev => ({ ...prev, [fieldPath]: value }));\n    },\n    onReactionStart: (reactionId) => {\n      console.log('Reaction started:', reactionId);\n    },\n    onReactionComplete: (reactionId, result) => {\n      console.log('Reaction completed:', result);\n    },\n    onReactionError: (reactionId, error) => {\n      console.error('Reaction failed:', error);\n    },\n  });\n\n  // Trigger a reaction on field blur\n  const handleFieldBlur = (fieldName: string, value: any) => {\n    triggerReaction(reactionId, {\n      triggerField: fieldName,\n      triggerEvent: 'blur',\n      fieldValue: value,\n      formData: currentFormData,\n    });\n  };\n\n  // Show loading state for a field\n  const isFieldLoading = pendingFields.has('companyName');\n\n  // Check if field was recently updated\n  const wasRecentlyUpdated = recentlyUpdatedFields.has('companyName');\n\n  return (\n    <form>\n      <input\n        name=\"companyDomain\"\n        onBlur={(e) => handleFieldBlur('companyDomain', e.target.value)}\n      />\n      <input\n        name=\"companyName\"\n        disabled={isFieldLoading}\n        className={wasRecentlyUpdated ? 'highlight' : ''}\n      />\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"hook-return-values",children:"Hook Return Values"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Value"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"triggerReaction"})}),(0,s.jsx)(n.td,{children:"Function"}),(0,s.jsx)(n.td,{children:"Manually trigger a reaction"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"cancelReaction"})}),(0,s.jsx)(n.td,{children:"Function"}),(0,s.jsx)(n.td,{children:"Cancel a pending reaction"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"hasReaction"})}),(0,s.jsx)(n.td,{children:"Function"}),(0,s.jsx)(n.td,{children:"Check if field has reactions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"getFieldReactions"})}),(0,s.jsx)(n.td,{children:"Function"}),(0,s.jsx)(n.td,{children:"Get all reactions for a field"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reactionStates"})}),(0,s.jsx)(n.td,{children:"Map"}),(0,s.jsx)(n.td,{children:"Current state of each reaction"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pendingFields"})}),(0,s.jsx)(n.td,{children:"Set"}),(0,s.jsx)(n.td,{children:"Fields with pending reactions"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"recentlyUpdatedFields"})}),(0,s.jsx)(n.td,{children:"Set"}),(0,s.jsx)(n.td,{children:"Fields recently updated"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"reaction-states",children:"Reaction States"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ReactionState {\n  status: 'idle' | 'pending' | 'loading' | 'success' | 'error';\n  error?: string;\n  lastExecutedAt?: Date;\n  lastResult?: any;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-appropriate-debounce",children:"1. Use Appropriate Debounce"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Text fields - wait for user to finish typing\ntrigger: { debounceMs: 500 }\n\n// Select fields - respond immediately\ntrigger: { debounceMs: 0 }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-handle-errors-gracefully",children:"2. Handle Errors Gracefully"}),"\n",(0,s.jsx)(n.p,{children:"Configure feedback to show errors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"feedback: {\n  showError: true,\n  showLoading: true\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-set-reasonable-timeouts",children:"3. Set Reasonable Timeouts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"execution: {\n  timeoutMs: 10000  // 10 seconds is usually sufficient\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-use-null-behavior-wisely",children:"4. Use Null Behavior Wisely"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Skip update if API returns null\n{ nullBehavior: 'skip' }\n\n// Clear field if source is empty\n{ nullBehavior: 'clear' }\n\n// Use default value\n{ nullBehavior: 'default', defaultValue: 'Unknown' }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-keep-workflows-simple",children:"5. Keep Workflows Simple"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Focus on single responsibility"}),"\n",(0,s.jsx)(n.li,{children:"Use transforms to shape data"}),"\n",(0,s.jsx)(n.li,{children:"Handle errors in the workflow"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsx)(n.h3,{id:"current-phase-v1",children:"Current Phase (v1)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Synchronous execution only"}),": Workflows run inline, not via job queue"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Manual trigger"}),": Auto-attachment to field events coming in Phase 3"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Transform expressions"}),": Accepted but not executed (requires sandboxing)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cascade depth"}),": Maximum of 3 to prevent infinite loops"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"planned-features",children:"Planned Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Async execution via job queue (Phase 5)"}),"\n",(0,s.jsx)(n.li,{children:"Automatic field event attachment (Phase 3)"}),"\n",(0,s.jsx)(n.li,{children:"Transform expression execution"}),"\n",(0,s.jsx)(n.li,{children:"Visual reaction builder in Form Builder"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"reaction-not-firing",children:"Reaction Not Firing"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Check that the reaction is enabled"}),"\n",(0,s.jsx)(n.li,{children:"Verify the trigger field name matches exactly"}),"\n",(0,s.jsx)(n.li,{children:"Ensure the workflow exists and is accessible"}),"\n",(0,s.jsx)(n.li,{children:"Check debounce isn't too long"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"field-updates-not-appearing",children:"Field Updates Not Appearing"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Verify the Form Field Update node mappings"}),"\n",(0,s.jsx)(n.li,{children:"Check source paths match workflow output"}),"\n",(0,s.jsx)(n.li,{children:"Ensure null behavior is configured correctly"}),"\n",(0,s.jsx)(n.li,{children:"Look for errors in reaction execution"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"timeout-errors",children:"Timeout Errors"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Increase the execution timeout"}),"\n",(0,s.jsx)(n.li,{children:"Optimize the workflow (fewer nodes, faster API calls)"}),"\n",(0,s.jsx)(n.li,{children:"Check for slow external API responses"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cascade-loop-detected",children:"Cascade Loop Detected"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Ensure reactions don't update their own trigger fields"}),"\n",(0,s.jsx)(n.li,{children:"Review all reactions that might create circular updates"}),"\n",(0,s.jsx)(n.li,{children:"Simplify reaction chains"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/workflows/overview",children:"Workflows Overview"})," - Learn about workflow basics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/workflows/node-types",children:"Node Types"})," - Explore all workflow nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/forms/field-types",children:"Field Types"})," - Available form field types"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/forms/conditional-logic",children:"Conditional Logic"})," - Dynamic form behavior"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);