"use strict";(self.webpackChunkdocs_netpad_io=self.webpackChunkdocs_netpad_io||[]).push([[5492],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var o=t(96540);const i={},r=o.createContext(i);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:n},e.children)}},92418:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"extensions/example-collaborate","title":"Example: Collaborate Extension","description":"A real-world walkthrough of the @netpad/collaborate extension","source":"@site/docs/extensions/example-collaborate.md","sourceDirName":"extensions","slug":"/extensions/example-collaborate","permalink":"/docs/extensions/example-collaborate","draft":false,"unlisted":false,"editUrl":"https://github.com/mrlynn/netpad-v3/tree/main/docs/docs/extensions/example-collaborate.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Example: Collaborate Extension","description":"A real-world walkthrough of the @netpad/collaborate extension"},"sidebar":"docs","previous":{"title":"\ud83d\udce1 API Reference","permalink":"/docs/extensions/api-reference"},"next":{"title":"\ud83d\udce6 Packages","permalink":"/docs/developer/packages"}}');var i=t(74848),r=t(28453);const a={sidebar_position:5,title:"Example: Collaborate Extension",description:"A real-world walkthrough of the @netpad/collaborate extension"},s="Example: The Collaborate Extension",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Type Definitions",id:"type-definitions",level:2},{value:"Extension Configuration",id:"extension-configuration",level:2},{value:"API Routes Implementation",id:"api-routes-implementation",level:2},{value:"Gallery Endpoint",id:"gallery-endpoint",level:3},{value:"Submission Endpoint",id:"submission-endpoint",level:3},{value:"Email Notification",id:"email-notification",level:3},{value:"Extension Definition",id:"extension-definition",level:2},{value:"React Components",id:"react-components",level:2},{value:"GalleryGrid Component",id:"gallerygrid-component",level:3},{value:"Component Exports",id:"component-exports",level:3},{value:"Using the Extension",id:"using-the-extension",level:2},{value:"Enable the Extension",id:"enable-the-extension",level:3},{value:"Use Components in Pages",id:"use-components-in-pages",level:3},{value:"Check Feature Availability",id:"check-feature-availability",level:3},{value:"Build Configuration",id:"build-configuration",level:2},{value:"Testing",id:"testing",level:2},{value:"Lessons Learned",id:"lessons-learned",level:2},{value:"1. Avoid Package Dependencies in Handlers",id:"1-avoid-package-dependencies-in-handlers",level:3},{value:"2. Namespace Everything",id:"2-namespace-everything",level:3},{value:"3. Graceful Degradation",id:"3-graceful-degradation",level:3},{value:"4. Separate Component Builds",id:"4-separate-component-builds",level:3},{value:"5. Clear Loading States",id:"5-clear-loading-states",level:3},{value:"Summary",id:"summary",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"example-the-collaborate-extension",children:"Example: The Collaborate Extension"})}),"\n",(0,i.jsxs)(n.p,{children:["This guide walks through ",(0,i.jsx)(n.code,{children:"@netpad/collaborate"}),", a real NetPad extension that provides community collaboration features. We'll examine its architecture, implementation patterns, and lessons learned."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The collaborate extension provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Community Gallery"})," - Showcase of community-contributed forms, workflows, and integrations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Contributor Leaderboard"})," - Recognition for top contributors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Collaboration Applications"})," - System for soliciting and managing collaborator applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Email Notifications"})," - Notifications for new submissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"React Components"})," - Pre-built UI components for custom pages"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"packages/collaborate/\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 tsup.config.ts\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 index.ts              # Main extension definition\n\u2502   \u251c\u2500\u2500 types/\n\u2502   \u2502   \u2514\u2500\u2500 index.ts          # Type definitions\n\u2502   \u2514\u2500\u2500 components/\n\u2502       \u251c\u2500\u2500 index.ts          # Component exports\n\u2502       \u251c\u2500\u2500 GalleryGrid.tsx\n\u2502       \u251c\u2500\u2500 ContributorCard.tsx\n\u2502       \u251c\u2500\u2500 ContributorLeaderboard.tsx\n\u2502       \u2514\u2500\u2500 CollaborateHero.tsx\n\u2514\u2500\u2500 dist/                     # Built output\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-definitions",children:"Type Definitions"}),"\n",(0,i.jsx)(n.p,{children:"The extension starts with clear type definitions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/types/index.ts\n\n/**\n * Collaborator submission data\n */\nexport interface CollaboratorSubmission {\n  submissionId: string;\n  name: string;\n  email: string;\n  lane: 'product' | 'engineering' | 'integrations' | 'not_sure';\n  shipped?: string;\n  whyNetpad?: string;\n  availability?: string;\n  location?: string;\n  workLinks?: string;\n  submittedAt: Date;\n  source: 'form' | 'conversational';\n  status: 'pending' | 'reviewed' | 'contacted' | 'declined';\n}\n\n/**\n * Gallery item for community showcase\n */\nexport interface GalleryItem {\n  id: string;\n  title: string;\n  description: string;\n  category: 'template' | 'workflow' | 'integration' | 'app';\n  author: {\n    name: string;\n    avatar?: string;\n    githubUrl?: string;\n  };\n  thumbnailUrl?: string;\n  demoUrl?: string;\n  sourceUrl?: string;\n  tags: string[];\n  createdAt: Date;\n  featured: boolean;\n  views: number;\n  likes: number;\n}\n\n/**\n * Contributor profile\n */\nexport interface Contributor {\n  id: string;\n  name: string;\n  avatarUrl?: string;\n  githubUsername?: string;\n  contributions: number;\n  contributionTypes: ('code' | 'docs' | 'templates' | 'workflows' | 'design')[];\n  joinedAt: Date;\n  bio?: string;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"extension-configuration",children:"Extension Configuration"}),"\n",(0,i.jsx)(n.p,{children:"The extension loads configuration from environment variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/index.ts\n\ninterface CollaborateConfig {\n  resendApiKey?: string;\n  notificationEmail?: string;\n  enabled: boolean;\n}\n\nlet config: CollaborateConfig = {\n  enabled: true,\n};\n\n// Called during initialization\nfunction loadConfig(): void {\n  config = {\n    resendApiKey: process.env.RESEND_API_KEY,\n    notificationEmail: process.env.COLLABORATE_NOTIFICATION_EMAIL || 'team@netpad.io',\n    enabled: process.env.COLLABORATE_ENABLED !== 'false',\n  };\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"api-routes-implementation",children:"API Routes Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"gallery-endpoint",children:"Gallery Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"/**\n * GET /api/ext/collaborate/gallery\n *\n * Returns community gallery items with optional filtering.\n */\nasync function handleGetGallery(request: NextRequest): Promise<NextResponse> {\n  const { searchParams } = new URL(request.url);\n\n  const category = searchParams.get('category') as GalleryItem['category'] | null;\n  const featured = searchParams.get('featured') === 'true';\n  const limit = parseInt(searchParams.get('limit') || '20');\n  const offset = parseInt(searchParams.get('offset') || '0');\n\n  try {\n    // In production, this would query MongoDB\n    const items = await collaborateService.getGalleryItems({\n      category: category || undefined,\n      featured: featured || undefined,\n      limit,\n      offset,\n    });\n\n    return NextResponse.json({\n      success: true,\n      items: items.items,\n      total: items.total,\n      pagination: { limit, offset },\n    });\n  } catch (error) {\n    console.error('[Collaborate] Gallery error:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch gallery' },\n      { status: 500 }\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"submission-endpoint",children:"Submission Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"/**\n * POST /api/ext/collaborate/submit\n *\n * Handles collaboration applications.\n */\nasync function handleSubmit(request: NextRequest): Promise<NextResponse> {\n  try {\n    const body = await request.json();\n\n    // Validate required fields\n    const requiredFields = ['name', 'email', 'lane'];\n    for (const field of requiredFields) {\n      if (!body[field]) {\n        return NextResponse.json(\n          { success: false, error: `${field} is required` },\n          { status: 400 }\n        );\n      }\n    }\n\n    // Validate email format\n    if (!isValidEmail(body.email)) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid email address' },\n        { status: 400 }\n      );\n    }\n\n    // Create submission\n    const submissionId = `collab_${Date.now()}_${generateId()}`;\n\n    const submission: CollaboratorSubmission = {\n      submissionId,\n      name: body.name,\n      email: body.email,\n      lane: body.lane,\n      shipped: body.shipped,\n      whyNetpad: body.whyNetpad,\n      availability: body.availability,\n      location: body.location,\n      workLinks: body.workLinks,\n      submittedAt: new Date(),\n      source: body.conversationId ? 'conversational' : 'form',\n      status: 'pending',\n    };\n\n    // Store submission (in production, save to MongoDB)\n    await collaborateService.storeSubmission(submission);\n\n    // Send notification asynchronously\n    sendNotificationAsync(submission);\n\n    return NextResponse.json({\n      success: true,\n      submissionId,\n      message: 'Thank you for your interest! We will review your application shortly.',\n    });\n  } catch (error) {\n    console.error('[Collaborate] Submit error:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to submit application' },\n      { status: 500 }\n    );\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"email-notification",children:"Email Notification"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"/**\n * Sends email notification for new submissions.\n * Uses Resend API directly to avoid package dependencies.\n */\nasync function sendNotification(submission: CollaboratorSubmission): Promise<void> {\n  if (!config.resendApiKey) {\n    console.log('[Collaborate] No Resend API key, skipping notification');\n    return;\n  }\n\n  const html = `\n    <h2>New Collaborator Application</h2>\n    <p><strong>Name:</strong> ${submission.name}</p>\n    <p><strong>Email:</strong> ${submission.email}</p>\n    <p><strong>Lane:</strong> ${submission.lane}</p>\n    <p><strong>What they've shipped:</strong> ${submission.shipped || 'Not provided'}</p>\n    <p><strong>Why NetPad:</strong> ${submission.whyNetpad || 'Not provided'}</p>\n    <p><strong>Availability:</strong> ${submission.availability || 'Not provided'}</p>\n    <p><strong>Location:</strong> ${submission.location || 'Not provided'}</p>\n    <p><strong>Source:</strong> ${submission.source}</p>\n  `;\n\n  // Use fetch directly to avoid resend package dependency\n  const response = await fetch('https://api.resend.com/emails', {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${config.resendApiKey}`,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      from: 'NetPad Collaborate <collaborate@netpad.io>',\n      to: config.notificationEmail,\n      subject: `New Collaborator: ${submission.name} (${submission.lane})`,\n      html,\n    }),\n  });\n\n  if (!response.ok) {\n    console.error('[Collaborate] Failed to send notification:', await response.text());\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"extension-definition",children:"Extension Definition"}),"\n",(0,i.jsx)(n.p,{children:"The complete extension definition ties everything together:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export const collaborateExtension: NetPadExtension = {\n  metadata: {\n    id: 'netpad-collaborate',\n    name: 'NetPad Collaborate',\n    version: '1.0.0',\n    description: 'Community collaboration features for NetPad',\n    author: 'NetPad Team',\n    homepage: 'https://docs.netpad.io/extensions/example-collaborate',\n  },\n\n  features: [\n    'custom:collaborate',\n    'custom:community_gallery',\n    'custom:contributor_leaderboard',\n  ],\n\n  routes: [\n    {\n      path: '/api/ext/collaborate/gallery',\n      method: 'GET',\n      handler: handleGetGallery,\n    },\n    {\n      path: '/api/ext/collaborate/contributors',\n      method: 'GET',\n      handler: handleGetContributors,\n    },\n    {\n      path: '/api/ext/collaborate/submit',\n      method: 'POST',\n      handler: handleSubmit,\n    },\n    {\n      path: '/api/ext/collaborate/notify',\n      method: 'POST',\n      handler: handleNotify,\n    },\n  ],\n\n  services: {\n    collaborate: collaborateService,\n  },\n\n  initialize: async () => {\n    console.log('[Collaborate] Initializing...');\n    loadConfig();\n    console.log('[Collaborate] Extension initialized');\n  },\n\n  cleanup: async () => {\n    console.log('[Collaborate] Cleaning up...');\n  },\n};\n\nexport default collaborateExtension;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"react-components",children:"React Components"}),"\n",(0,i.jsx)(n.h3,{id:"gallerygrid-component",children:"GalleryGrid Component"}),"\n",(0,i.jsx)(n.p,{children:"The GalleryGrid component fetches and displays gallery items:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// src/components/GalleryGrid.tsx\n'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n  Typography,\n  Chip,\n  Skeleton,\n  Alert,\n} from '@mui/material';\nimport type { GalleryItem } from '../types';\n\nexport interface GalleryGridProps {\n  /** API endpoint (defaults to /api/ext/collaborate/gallery) */\n  endpoint?: string;\n  /** Filter by category */\n  category?: GalleryItem['category'];\n  /** Only show featured items */\n  featured?: boolean;\n  /** Maximum items to display */\n  limit?: number;\n  /** Number of columns */\n  columns?: 1 | 2 | 3 | 4;\n  /** Callback when item is clicked */\n  onItemClick?: (item: GalleryItem) => void;\n}\n\nexport function GalleryGrid({\n  endpoint = '/api/ext/collaborate/gallery',\n  category,\n  featured,\n  limit = 12,\n  columns = 3,\n  onItemClick,\n}: GalleryGridProps) {\n  const [items, setItems] = useState<GalleryItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchItems = async () => {\n      setLoading(true);\n      try {\n        const params = new URLSearchParams();\n        if (category) params.set('category', category);\n        if (featured) params.set('featured', 'true');\n        if (limit) params.set('limit', String(limit));\n\n        const response = await fetch(`${endpoint}?${params}`);\n        const data = await response.json();\n\n        if (data.success) {\n          setItems(data.items);\n        } else {\n          setError(data.error);\n        }\n      } catch (err) {\n        setError('Failed to load gallery');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchItems();\n  }, [endpoint, category, featured, limit]);\n\n  if (loading) {\n    return (\n      <Grid container spacing={3}>\n        {Array.from({ length: limit }).map((_, i) => (\n          <Grid item xs={12} sm={6} md={4} key={i}>\n            <Skeleton variant=\"rectangular\" height={200} />\n          </Grid>\n        ))}\n      </Grid>\n    );\n  }\n\n  if (error) {\n    return <Alert severity=\"error\">{error}</Alert>;\n  }\n\n  return (\n    <Grid container spacing={3}>\n      {items.map((item) => (\n        <Grid item xs={12} sm={6} md={12 / columns} key={item.id}>\n          <Card\n            onClick={() => onItemClick?.(item)}\n            sx={{ cursor: onItemClick ? 'pointer' : 'default' }}\n          >\n            {item.thumbnailUrl && (\n              <CardMedia\n                component=\"img\"\n                height=\"180\"\n                image={item.thumbnailUrl}\n                alt={item.title}\n              />\n            )}\n            <CardContent>\n              <Typography variant=\"h6\">{item.title}</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {item.description}\n              </Typography>\n              <Box sx={{ mt: 1, display: 'flex', gap: 0.5 }}>\n                {item.tags.slice(0, 3).map((tag) => (\n                  <Chip key={tag} label={tag} size=\"small\" />\n                ))}\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"component-exports",children:"Component Exports"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/components/index.ts\n\nexport { GalleryGrid } from './GalleryGrid';\nexport type { GalleryGridProps } from './GalleryGrid';\n\nexport { ContributorCard } from './ContributorCard';\nexport type { ContributorCardProps } from './ContributorCard';\n\nexport { ContributorLeaderboard } from './ContributorLeaderboard';\nexport type { ContributorLeaderboardProps } from './ContributorLeaderboard';\n\nexport { CollaborateHero } from './CollaborateHero';\nexport type { CollaborateHeroProps } from './CollaborateHero';\n\n// Component IDs for extension system\nexport const COLLABORATE_COMPONENTS = {\n  GALLERY_GRID: 'collaborate:gallery',\n  CONTRIBUTOR_CARD: 'collaborate:contributor',\n  LEADERBOARD: 'collaborate:leaderboard',\n  HERO: 'collaborate:hero',\n} as const;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"using-the-extension",children:"Using the Extension"}),"\n",(0,i.jsx)(n.h3,{id:"enable-the-extension",children:"Enable the Extension"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env.local\nNETPAD_EXTENSIONS=@netpad/collaborate\nRESEND_API_KEY=re_xxxxx\nCOLLABORATE_NOTIFICATION_EMAIL=team@example.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"use-components-in-pages",children:"Use Components in Pages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'// app/community/page.tsx\n\'use client\';\n\nimport { Container, Typography } from \'@mui/material\';\nimport {\n  CollaborateHero,\n  GalleryGrid,\n  ContributorLeaderboard,\n} from \'@netpad/collaborate/components\';\n\nexport default function CommunityPage() {\n  return (\n    <Container>\n      <CollaborateHero\n        title="NetPad Community"\n        subtitle="Discover forms, workflows, and integrations built by the community"\n        ctaText="Contribute"\n        ctaAction="/collaborate"\n      />\n\n      <Typography variant="h4" sx={{ mt: 6, mb: 3 }}>\n        Featured Projects\n      </Typography>\n      <GalleryGrid featured={true} limit={6} />\n\n      <Typography variant="h4" sx={{ mt: 6, mb: 3 }}>\n        Top Contributors\n      </Typography>\n      <ContributorLeaderboard variant="podium" limit={10} />\n    </Container>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"check-feature-availability",children:"Check Feature Availability"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { isFeatureAvailable } from '@/lib/extensions/registry';\n\n// In a component or API route\nif (isFeatureAvailable('custom:community_gallery')) {\n  // Show gallery features\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"build-configuration",children:"Build Configuration"}),"\n",(0,i.jsx)(n.p,{children:"The tsup configuration handles the dual entry points:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// tsup.config.ts\nimport { defineConfig } from 'tsup';\n\nexport default defineConfig({\n  entry: {\n    index: 'src/index.ts',\n    'components/index': 'src/components/index.ts',\n  },\n  format: ['cjs', 'esm'],\n  dts: true,\n  clean: true,\n  external: [\n    'react',\n    'react-dom',\n    'next',\n    'next/server',\n    '@mui/material',\n    '@mui/icons-material',\n  ],\n  treeshake: true,\n  sourcemap: true,\n  esbuildOptions(options) {\n    options.banner = {\n      js: '\"use client\";',\n    };\n  },\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// tests/collaborate.test.ts\nimport { collaborateExtension } from '@netpad/collaborate';\n\ndescribe('@netpad/collaborate', () => {\n  it('should have correct metadata', () => {\n    expect(collaborateExtension.metadata.id).toBe('netpad-collaborate');\n    expect(collaborateExtension.metadata.version).toBe('1.0.0');\n  });\n\n  it('should declare custom features', () => {\n    expect(collaborateExtension.features).toContain('custom:collaborate');\n    expect(collaborateExtension.features).toContain('custom:community_gallery');\n  });\n\n  it('should define 4 routes', () => {\n    expect(collaborateExtension.routes).toHaveLength(4);\n  });\n\n  it('should expose collaborate service', () => {\n    expect(collaborateExtension.services?.collaborate).toBeDefined();\n  });\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"lessons-learned",children:"Lessons Learned"}),"\n",(0,i.jsx)(n.h3,{id:"1-avoid-package-dependencies-in-handlers",children:"1. Avoid Package Dependencies in Handlers"}),"\n",(0,i.jsxs)(n.p,{children:["The extension uses ",(0,i.jsx)(n.code,{children:"fetch"})," directly for the Resend API instead of importing the ",(0,i.jsx)(n.code,{children:"resend"})," package. This avoids dependency resolution issues when the extension is loaded dynamically."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Instead of: import { Resend } from 'resend';\n// Use direct fetch to the API\nconst response = await fetch('https://api.resend.com/emails', { ... });\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-namespace-everything",children:"2. Namespace Everything"}),"\n",(0,i.jsxs)(n.p,{children:["All routes, features, and component IDs use the ",(0,i.jsx)(n.code,{children:"collaborate"})," prefix to avoid conflicts:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Routes: ",(0,i.jsx)(n.code,{children:"/api/ext/collaborate/*"})]}),"\n",(0,i.jsxs)(n.li,{children:["Features: ",(0,i.jsx)(n.code,{children:"custom:collaborate"}),", ",(0,i.jsx)(n.code,{children:"custom:community_gallery"})]}),"\n",(0,i.jsxs)(n.li,{children:["Component IDs: ",(0,i.jsx)(n.code,{children:"collaborate:gallery"}),", ",(0,i.jsx)(n.code,{children:"collaborate:hero"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-graceful-degradation",children:"3. Graceful Degradation"}),"\n",(0,i.jsx)(n.p,{children:"The extension checks for configuration before using features:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"if (!config.resendApiKey) {\n  console.log('[Collaborate] No API key, skipping notification');\n  return;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-separate-component-builds",children:"4. Separate Component Builds"}),"\n",(0,i.jsxs)(n.p,{children:["Components are built to a separate entry point (",(0,i.jsx)(n.code,{children:"components/index"}),") so they can be imported independently:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { GalleryGrid } from '@netpad/collaborate/components';\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-clear-loading-states",children:"5. Clear Loading States"}),"\n",(0,i.jsx)(n.p,{children:"Components handle loading, error, and empty states appropriately:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'if (loading) return <Skeleton />;\nif (error) return <Alert severity="error">{error}</Alert>;\nif (items.length === 0) return <EmptyState />;\n'})}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"The collaborate extension demonstrates:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Clean package structure with separate type definitions"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Multiple API routes with validation"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Environment-based configuration"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 External API integration (Resend)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Reusable React components"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Feature flags for capability detection"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Proper error handling"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Comprehensive testing"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Use this as a template for building your own NetPad extensions!"}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./overview",children:"Extensions Overview"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./architecture",children:"Extension Architecture"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./building-extensions",children:"Building Extensions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./api-reference",children:"API Reference"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);