"use strict";(self.webpackChunkdocs_netpad_io=self.webpackChunkdocs_netpad_io||[]).push([[7715],{8370:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/configuration","title":"Configuration","description":"NetPad requires several environment variables to function properly. This guide covers all configuration options.","source":"@site/docs/getting-started/configuration.md","sourceDirName":"getting-started","slug":"/getting-started/configuration","permalink":"/docs/getting-started/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/mrlynn/netpad-v3/tree/main/docs/docs/getting-started/configuration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Quick Start","permalink":"/docs/getting-started/quick-start"},"next":{"title":"Frequently Asked Questions","permalink":"/docs/getting-started/faq"}}');var t=i(4848),s=i(8453);const l={},o="Configuration",a={},c=[{value:"Required Environment Variables",id:"required-environment-variables",level:2},{value:"Database Configuration",id:"database-configuration",level:3},{value:"Security &amp; Encryption",id:"security--encryption",level:3},{value:"Application URL",id:"application-url",level:3},{value:"Optional Environment Variables",id:"optional-environment-variables",level:2},{value:"OAuth Authentication",id:"oauth-authentication",level:3},{value:"Email Configuration (Magic Links)",id:"email-configuration-magic-links",level:3},{value:"WebAuthn (Passkeys)",id:"webauthn-passkeys",level:3},{value:"AI Features (Optional)",id:"ai-features-optional",level:3},{value:"Stripe (Billing - Optional)",id:"stripe-billing---optional",level:3},{value:"File Storage",id:"file-storage",level:3},{value:"MongoDB Atlas API (Auto-Provisioning)",id:"mongodb-atlas-api-auto-provisioning",level:3},{value:"Cloudflare Turnstile (Bot Protection)",id:"cloudflare-turnstile-bot-protection",level:3},{value:"Environment File Setup",id:"environment-file-setup",level:2},{value:"Local Development",id:"local-development",level:3},{value:"Production (Vercel)",id:"production-vercel",level:3},{value:"Production (Self-Hosted)",id:"production-self-hosted",level:3},{value:"Configuration Validation",id:"configuration-validation",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Testing Your Configuration",id:"testing-your-configuration",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,t.jsx)(n.p,{children:"NetPad requires several environment variables to function properly. This guide covers all configuration options."}),"\n",(0,t.jsx)(n.h2,{id:"required-environment-variables",children:"Required Environment Variables"}),"\n",(0,t.jsx)(n.h3,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# MongoDB connection for platform database\nMONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/\nMONGODB_DATABASE=form_builder_platform\n"})}),"\n",(0,t.jsx)(n.h3,{id:"security--encryption",children:"Security & Encryption"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Session encryption (32+ character secret)\nSESSION_SECRET=your-32-character-secret-key-here\n\n# Vault encryption key (base64-encoded 32-byte key)\nVAULT_ENCRYPTION_KEY=base64-encoded-32-byte-key\n"})}),"\n",(0,t.jsx)(n.p,{children:"Generate encryption keys:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate SESSION_SECRET\nopenssl rand -base64 32\n\n# Generate VAULT_ENCRYPTION_KEY\nopenssl rand -base64 32\n"})}),"\n",(0,t.jsx)(n.h3,{id:"application-url",children:"Application URL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Your application's public URL\nNEXT_PUBLIC_APP_URL=https://yourdomain.com\n"})}),"\n",(0,t.jsx)(n.h2,{id:"optional-environment-variables",children:"Optional Environment Variables"}),"\n",(0,t.jsx)(n.h3,{id:"oauth-authentication",children:"OAuth Authentication"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Google OAuth\nGOOGLE_CLIENT_ID=your-google-client-id\nGOOGLE_CLIENT_SECRET=your-google-client-secret\n\n# GitHub OAuth\nGITHUB_CLIENT_ID=your-github-client-id\nGITHUB_CLIENT_SECRET=your-github-client-secret\n"})}),"\n",(0,t.jsx)(n.h3,{id:"email-configuration-magic-links",children:"Email Configuration (Magic Links)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# SMTP settings for magic link emails\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=your-email@gmail.com\nSMTP_PASS=your-app-password\nFROM_EMAIL=noreply@yourdomain.com\n"})}),"\n",(0,t.jsx)(n.h3,{id:"webauthn-passkeys",children:"WebAuthn (Passkeys)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# WebAuthn configuration\nWEBAUTHN_RP_ID=yourdomain.com\nWEBAUTHN_RP_NAME=NetPad\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ai-features-optional",children:"AI Features (Optional)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# OpenAI API key for AI-powered features\nOPENAI_API_KEY=sk-...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stripe-billing---optional",children:"Stripe (Billing - Optional)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Stripe configuration for subscriptions\nSTRIPE_SECRET_KEY=sk_...\nSTRIPE_WEBHOOK_SECRET=whsec_...\nNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"file-storage",children:"File Storage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Vercel Blob Storage for file uploads\nBLOB_READ_WRITE_TOKEN=vercel_blob_...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mongodb-atlas-api-auto-provisioning",children:"MongoDB Atlas API (Auto-Provisioning)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# MongoDB Atlas API credentials for auto-provisioning\nATLAS_PUBLIC_KEY=your-atlas-public-key\nATLAS_PRIVATE_KEY=your-atlas-private-key\nATLAS_GROUP_ID=your-atlas-group-id\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cloudflare-turnstile-bot-protection",children:"Cloudflare Turnstile (Bot Protection)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Turnstile CAPTCHA\nNEXT_PUBLIC_TURNSTILE_SITE_KEY=your-site-key\nTURNSTILE_SECRET_KEY=your-secret-key\n"})}),"\n",(0,t.jsx)(n.h2,{id:"environment-file-setup",children:"Environment File Setup"}),"\n",(0,t.jsx)(n.h3,{id:"local-development",children:"Local Development"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:".env.local"})," file in the project root:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env.local\n# Edit .env.local with your values\n"})}),"\n",(0,t.jsx)(n.h3,{id:"production-vercel",children:"Production (Vercel)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Go to your Vercel project settings"}),"\n",(0,t.jsx)(n.li,{children:'Navigate to "Environment Variables"'}),"\n",(0,t.jsx)(n.li,{children:"Add all required variables"}),"\n",(0,t.jsx)(n.li,{children:"Redeploy your application"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"production-self-hosted",children:"Production (Self-Hosted)"}),"\n",(0,t.jsx)(n.p,{children:"Set environment variables in your deployment environment:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Using PM2"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create ecosystem.config.js\nmodule.exports = {\n  apps: [{\n    name: 'netpad',\n    script: 'npm',\n    args: 'start',\n    env: {\n      MONGODB_URI: 'mongodb+srv://...',\n      SESSION_SECRET: '...',\n      // ... other variables\n    }\n  }]\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Using Docker"})," (future):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Use docker-compose.yml or docker run with -e flags\ndocker run -e MONGODB_URI=... -e SESSION_SECRET=... ...\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-validation",children:"Configuration Validation"}),"\n",(0,t.jsx)(n.p,{children:"NetPad will validate required environment variables on startup. Missing required variables will cause the application to fail with clear error messages."}),"\n",(0,t.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Never commit ",(0,t.jsx)(n.code,{children:".env.local"})]})," to version control"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use strong, random secrets"})," for encryption keys"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rotate keys periodically"})," in production"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use environment-specific values"})," (dev, staging, production)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Restrict access"})," to environment variables in your deployment platform"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"testing-your-configuration",children:"Testing Your Configuration"}),"\n",(0,t.jsx)(n.p,{children:"After setting up environment variables:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Start the application: ",(0,t.jsx)(n.code,{children:"npm run dev"})]}),"\n",(0,t.jsx)(n.li,{children:"Check the console for any configuration errors"}),"\n",(0,t.jsx)(n.li,{children:"Test authentication (magic link, OAuth, passkeys)"}),"\n",(0,t.jsx)(n.li,{children:"Test MongoDB connection"}),"\n",(0,t.jsx)(n.li,{children:"Create a test form and verify it works"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:'"Missing required environment variable"'}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check that all required variables are set"}),"\n",(0,t.jsx)(n.li,{children:"Verify variable names match exactly (case-sensitive)"}),"\n",(0,t.jsx)(n.li,{children:"Restart the application after adding variables"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:'"Encryption key invalid"'}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure ",(0,t.jsx)(n.code,{children:"VAULT_ENCRYPTION_KEY"})," is base64-encoded"]}),"\n",(0,t.jsx)(n.li,{children:"Verify the key is exactly 32 bytes when decoded"}),"\n",(0,t.jsx)(n.li,{children:"Generate a new key if needed"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:'"MongoDB connection failed"'}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"MONGODB_URI"})," is correct"]}),"\n",(0,t.jsx)(n.li,{children:"Check network access to MongoDB"}),"\n",(0,t.jsx)(n.li,{children:"Verify database user permissions"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/getting-started/installation",children:"Installation Guide"})," - Complete installation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/getting-started/quickstart",children:"Quick Start Guide"})," - Create your first form"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/deployment/overview",children:"Deployment Guide"})," - Production deployment"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);